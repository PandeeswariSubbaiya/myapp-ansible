---
- hosts: webservers
  ignore_errors: true
  ignore_unreachable: true
  remote_user: ubuntu
  become: yes
  become_user: pandeeswari
  vars:
    ssh_private_key: |
      $ANSIBLE_VAULT;1.1;AES256
      33616539643035616136353931626534383033656163633762666632363766386238656663613832
      6361643730386534396530356166396235363061303637650a366434663234333163313862663765
      63313362316233396138363636343232393766363665633539306462376131633735656230396631
      3036646362386232640a626162663039356139303565633535626430336463616562623933326462
      35653965303232326238323162346262363263376438353561613036376232356130663865336538
      63343161343764376136383031393063303037653631303963366331326262356434623630616363
      61656534626164663962343133643235366563363537653165616535666230363339306239346564
      38663231313834653339333464336131356532623362353834353661623862616436303635306432
      36373661303036363861353737363862346333376439376436653335656236373731316261366465
      38396433653132396338366466323334353936363764643334363336613561366535653838336361
      37376338313462396438333632373666316535663734643766616635373034376238626462623936
      64633631626331306335643363663764346538343836616338373932613463353866383466663762
      32353161363838306436636461353137316163363464316539323436363364333135343363643036
      63313235633164376161356539376362323632393939633937653866613631356436353439363134
      39323836363832353531653732623231336363383764663538653566316433326661353364663435
      37376365313037643931303839346136663939303434313431623734333731386164663237643262
      34303763366335346535623237323261356233323964636162646364363537653036316339343337
      34613439366238326535386132353931343563313330363437356135626232393236666236323730
      31333161303563626637343939663738663330336566306366363734316337333566386331663961
      35376564336463353963323030343465373532616132343838323036643164306531333037613763
      61643139373966306562643035306164376666636239663665303732343332306535353061646335
      39386566646431646566393138623735343136653233636566393534626232393439666465353531
      38633664343362313962653965316533373563663630396162353236643733363632663530653635
      62353835626465616633353866336136333933326562626636613866656538653262613465343663
      35346236393636316633666439323966383036363337376639386539666365353331396332663861
      35306464626132353830346135346563333364666462643030383436353430643239363637663961
      38303237656266656462363935613362666266383236373233623936636563363632393531343136
      35346331656338616636396539346435343333643031306337393638633035626636636232303830
      39323635303136633161346631303332623463333665393635366563613531366430653735633431
      37373661636165666332653630613735386464376536343866343537393734323164343139633665
      36353630333866303463393966346339323635383233623266653962643632303464363832303538
      63346236376261656639646532393735666462336261356638316462623037613139643734376364
      39356665393830333630613339383766383934646562363639626563306465306435333639663333
      63376164613137653966663037643732346237663661383766663636376232366235663264386237
      30386561623733666531643137383338666538613163363233643233323633376666636661353939
      36333439353063633537343165623931326635323233656135643933353637363932373237393262
      33333766313462643333636161306666383566336666636261326263386638633836633435376166
      30393661393834616633616631396362323133336465323466653963346136613433383937363437
      30646164313233326335323633316361633864643738366538313330316435373431303765646534
      66383261363861306132613938376662623432633539636330356538323835373739346232366530
      39303639366435396165323535616138316262353733336565363866373536316263656539623135
      61663965363632396536633066646465643666343434333163393735373066333136373061373531
      39653264643232396365313663326531306561663161373263303639396339353739663135343137
      62643239303136623839626334616338336439623765363863383334313633386439616135356463
      32623530613565623136643738626632653861663562343130656537656331613332336635636238
      37323633333365646331333130656430353565356334616161346366353361633231363130343231
      31313465613632323539303864323361393035326265623363396664653333323561393964663134
      65653236386466656466643763326465316132633562663963386630623937656238373736653838
      35376131383930383966663763303939316235626363633961333637326135323537326132653030
      35616163666134333034633864363431353635306336346231636132386438613066313739623963
      34363438383835306534366539663761653864333537663636376432373432333634663034313039
      38343338373866373738333134363433656133386464656663616564356533313337383731343034
      35326264666630393730633062353563353335336239656661393735616437636162396636343062
      30343863383333393339313936613665356433366539643531373436633162363665313730306561
      37376636316336376135386135393363393032303733316335363663383734656366303862363037
      62643962663737643464616162613561653939303333373135363433363766303738646439633466
      38316362373436303664373432653333656331396664346664313337343464323236303462613938
      63623130653835313063336662613838633437336165316537393961633561306638326139303636
      34613933356239626262623265373535303738373666326331336463363238636637323431363136
      33313839353765313561646435623765353632613134316339313838336131363534366263313130
      61643636333037643039373438616532393638336363343330636664303037323066313365663930
      62363461373935363834363439393664636366636162376363323737323465333137666162643331
      30636333656164366634653862336232663038313535356631373531303739373763616131663236
      65363762373334323439653532356438376533353331626265386363623537346337333236653330
      66346333656631363735666432663862623334623638623035353966333834633664663935373733
      65343037303730643733373563343532646132326432303835646231636333386463396261643634
      38613336613961623764656263323430316563326665396532356565633938373835323366326138
      31616466623033343566663564323961333466353433373733623866656135366561653239663462
      31616234333861646166333134663931316263623736376462363466323830376538666438656563
      36333763373665303738663262376134383730306232643264353730383165363863623736333661
      33333163383262373766326139663735306432303364353838386337343936386464333665313561
      62633836623834376632346136323330656464323531646663303462383734656434323633356336
      66636631363366656662346663643664613064346535393663336331363539373862366163323437
      36373266653335623231333864313932623863323033373661323939646332636233366232666330
      66373636393930613763656237313436316139353961633231656631383164653563313231666166
      33623864393231653762346136356365303930646466316138343831383237656664643363623732
      33626433376634636563366633393630333364646633353633626461666634643532343561663232
      32633061356166333830333737346566373138646537356532323636643435646337383366373138
      32373736373365623336376463613732363136653364366338653837626538616233666537316234
      37333764613635613230383763633435323730303738333432356436396163336235663362363135
      36626436616631653832643938656335663430656437656237653264336339343837383131353735
      32326639353633666631383534343961363163356466656536616332333136303063373337643364
      30633133353164613266346338316130623634376262623162336565303133373837386530386632
      33323066613331353635303938633966616330396231396232336636326363613765623461656230
      34626535393863343163666266366264336139306634373063313933336630666565336531376465
      38373462623266663831396531353937666236393664636366633634646539396435386266646462
      36313530323963346235373365393265313338663139313837623463383936336464306435663466
      37306333313264316230
  tasks:
    - name: downloading tomcat
      get_url:
        url: https://dlcdn.apache.org/tomcat/tomcat-10/v10.1.6/bin/apache-tomcat-10.1.6.tar.gz
        dest: /opt
    - name: extracting tomcat
      unarchive:
        src: /opt/apache-tomcat-10.1.6.tar.gz
        dest: /opt
        remote_src: yes
    - name: installing java
      apt:
        name: default-jdk
        state: present
    - name: copy jar file
      copy:
        src: /var/lib/jenkins/workspace/terraform1/target/LoginWebApp-1
        dest: /opt/apache-tomcat-10.1.6/webapps/
      notify:
        - restart tomcat
  handlers:
    - name: restart tomcat
      service:
        name: tomcat
        state: restarted
      ignore_errors: true
